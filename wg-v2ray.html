<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>WireGuard برای V2Ray - Academi VPN</title>
  <style>
    :root{--bg:#0a0a0a;--panel:rgba(0,0,0,0.85);--accent:#00ccff;--header-h:68px}
    *{box-sizing:border-box} body{margin:0;padding:0;font-family:Segoe UI;background:var(--bg);color:#fff;transition:background .3s,color .3s} body.light{background:#f5f5f5;color:#222}
    header{position:fixed;top:0;left:0;right:0;height:var(--header-h);display:flex;align-items:center;justify-content:flex-start;padding:0 16px;background:var(--panel);z-index:1200}
    .left-controls{display:flex;gap:10px;align-items:center}
    .hamburger{border:0;background:transparent;color:var(--accent);font-size:22px;padding:8px 10px;border-radius:8px;cursor:pointer}
    .toggle-mode{border:0;background:transparent;color:var(--accent);font-size:20px;padding:6px 8px;border-radius:8px;cursor:pointer}
    .logo-title{margin:0;flex:1;text-align:center;font-size:18px;color:#ff00ff}
    .dropdown-menu{position:fixed;top:76px;left:16px;min-width:200px;background:rgba(18,18,18,0.98);border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.6);overflow:hidden;transform-origin:top left;transform:translateY(-8px) scale(.98);opacity:0;visibility:hidden;transition:transform .22s ease,opacity .22s ease,visibility .22s;display:flex;flex-direction:column;z-index:1199}
    .dropdown-menu.open{transform:translateY(0) scale(1);opacity:1;visibility:visible}
    main{padding-top:calc(var(--header-h) + 30px);max-width:720px;margin:0 auto;padding-left:16px;padding-right:16px}
    .panel{background:var(--panel);padding:18px;border-radius:12px;margin-top:18px}
    input,textarea,button{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:0;background:#111;color:#fff;font-family:monospace}
    button{background:var(--accent);color:#000;font-weight:700;cursor:pointer}
    footer{text-align:center;margin:30px 0;color:#aaa}
    footer a{color:var(--accent);text-decoration:none}
  </style>
</head>
<body>
  <header>
    <div class="left-controls">
      <button class="hamburger" id="hambBtn">☰</button>
      <button class="toggle-mode" id="themeToggle">🌙</button>
    </div>
    <h1 class="logo-title">WireGuard برای V2Ray</h1>
  </header>

  <nav class="dropdown-menu" id="dropdownMenu">
    <a href="index.html">🏠 صفحه اصلی</a>
    <a href="warp.html">🌐 Warp Generator</a>
    <a href="wg.html">⚡ WireGuard Gaming</a>
    <a href="telegram.html">📡 پروکسی تلگرام</a>
  </nav>

  <main>
    <div class="panel">
      <label>نام کانفیگ:</label>
      <input id="name" placeholder="مثلا v2ray">
      <button id="genBtn">⚡ ساخت V2Ray-WireGuard</button>
      <textarea id="out" rows="14" readonly style="margin-top:8px"></textarea>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="copyBtn">📋 کپی</button>
      </div>
    </div>

    <footer>
      <a href="https://t.me/Academi_vpn">Telegram: @Academi_vpn</a> |
      <a href="https://t.me/MahdiAGM0">Admin By : @MahdiAGM0</a>
    </footer>
  </main>

<script>
  // shared menu/theme
  const hamb = document.getElementById('hambBtn'), menu = document.getElementById('dropdownMenu');
  hamb.addEventListener('click', ()=> menu.classList.toggle('open'));
  document.addEventListener('click', (e)=> { if(!e.composedPath().includes(menu) && e.target !== hamb && menu.classList.contains('open')) menu.classList.remove('open')});
  const themeToggle = document.getElementById('themeToggle'); themeToggle.addEventListener('click', ()=> { document.body.classList.toggle('light'); themeToggle.textContent = document.body.classList.contains('light') ? '☀️' : '🌙'; });

  function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}
  function randIP(){return `${rand(1,255)}.${rand(0,255)}.${rand(0,255)}.${rand(1,254)}`}
  function b64(a){let s='';for(let i=0;i<a.length;i++)s+=String.fromCharCode(a[i]);return btoa(s)}

  document.getElementById('genBtn').addEventListener('click', ()=>{
    const secretKey = b64(crypto.getRandomValues(new Uint8Array(32)));
    const publicKey = b64(crypto.getRandomValues(new Uint8Array(32)));
    const endpoint = `${randIP()}:${rand(10000,65000)}`;
    const address = `10.${rand(0,255)}.${rand(0,255)}.${rand(1,254)}/32`;
    const name = document.getElementById('name').value.trim() || 'v2ray';
    const cfg = {
      protocol: "wireguard",
      tag: `Academi-${name}`,
      settings: {
        secretKey: secretKey,
        peers: [{ publicKey: publicKey, endpoint: endpoint, allowedIPs: ["0.0.0.0/0","::/0"] }],
        address: [address],
        mtu: 1280,
        dns: ["1.1.1.1","8.8.8.8"]
      }
    };
    document.getElementById('out').value = JSON.stringify(cfg,null,2);
  });

  document.getElementById('copyBtn').addEventListener('click', ()=> {
    navigator.clipboard.writeText(document.getElementById('out').value).then(()=>alert('کپی شد!'));
  });
</script>
</body>
</html>
